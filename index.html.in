<!DOCTYPE html>
<html>
    <head>
        <title><time></time></title>
        <style type="text/css">
         h1 { display: none; }

         body { margin: 0; font-family: "Courier New", monospace; }
         canvas {
             display: none;
             pointer-events: none;
         }

         video {
             position: fixed;
             min-width: 100vw;
             min-height: 100vh;
             left: 50%;
             top: 50%;
             transform: translate(-50%, -50%);
             mix-blend-mode: multiply;
             pointer-events: none;
         }

         #welcome {
             display: none;
         }

         #download {
             position: fixed;
             z-index: 100;
             bottom: 0;
             left: 50%;
             transform: translate(-50%, 0%);
             font-size: 12.5vmin;
             text-decoration: none;
             color: white;
         }

         #download:visited {
             color: white;
         }

         #htmlContainer {
             display: flex;
             justify-content: space-between;
             align-items: center;
             width: 95vw;
             height: 95vh;
         }

         @media (orientation: landscape) {
             #htmlContainer {
                 flex-direction: row;
             }
         }

         @media (orientation: portrait) {
             #htmlContainer {
                 flex-direction: column;
             }
         }

         #codes {
             display: flex;
             flex-wrap: wrap;
             justify-content: flex-start;
             align-items: flex-start;
             z-index: 100;
             flex-basis: 20%;
         }

         #focus {
             flex-basis: 45%;
         }

         #queer-loop {
             z-index: 100;
             margin: auto;
             position: fixed;
             max-width: 100vmin;
             max-height: 100vmin;
             left: 50%;
             top: 50%;
             transform: translate(-50%, -50%);
         }

         #log {
             flex-basis: 20%;
             flex-wrap: wrap;
             z-index: 100;
         }

         .log-entry {
             display: inline-flex;
             flex-direction: column;
             padding: 1em;
             text-decoration: none;
             color: white;
         }

         .log-entry:active, .log-entry:visited {
             color: white;
         }

         .log-entry div {
             display: flex;
         }

         .codeLink.active {
             position: relative;
         }

         .codeLink.active:after {
             position: absolute;
             content: '';
             display: block;
             top: 0;
             left: 0;
             right: 0;
             bottom: 0;
             border: 6px solid rgba(255, 255, 255, 0.5);
         }

         #codeContents {
             color: white;
             mix-blend-mode: difference;
         }
        </style>
    </head>
    <body>
        <div id="welcome">
            queer-loop requests camera access to be able to see itself-- in the mirror or on the device of a friend. If you want to see what will happen if you agree, click or tap on the central icon (this simulates 1 look in the mirror).
        </div>

        <canvas id="snapshotCanvas"></canvas>
        <canvas id="iconCanvas"></canvas>

        <h1><time id="lastUpdated"></time></h1>
        <div id="htmlContainer">
            <div id="codes"></div>
            <div id="focus">
                <div id="queer-loop">
                    <div id="codeText">
                        <span id="codeContents" contenteditable="true"></span>
                    </div>
                </div>

                <a id="download">save</a>
            </div>
            <div id="log"></div>
        </div>

    </body>
</html>
